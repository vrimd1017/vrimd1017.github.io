---
title: "GitError001_untracked working tree files"
date: 2020-02-18 03:14:00 -0400
categories: Git_Error
---


많은 오류를 거치게 될 것이라 생각은 했었지만, 시작하자마자 오류가 발생했고 일단은 하기로 했으니 에러에 대한 추가를..
우선은 dailyLog프로젝트를 시작하면서 우선은 View를 만들어야 겠다고 생각을 했었고, 컴퓨터에서 작업중이던 react프로젝트를
노트북으로 git을 통해 옮기면서 에러가 발생하였음.

처음 생각은 git을 통해서 create-react-app을 통해 생성된 react프로젝트 자체를 git에 올리고 노트북에 다운받으면 되지 않을까?
라는 생각을 가지고 노트북에서 아무생각없이 git pull 을 했었고 당연히도 프로젝트는 실행되지않았음.

//1

당연히 yarn start 명령 입력시에 프로젝트는 실행되지 않았고, pull로 로컬에 다운받아진 내용과 repo의 내용. 그리고 gitignore파일을 보고
리액트 프로젝트를 실행하는데 필요한 파일들이 gitignore에 지정되어있구나, 라고 생각을 하였고
우회적인 방법으로 노트북에서도 해당 내용을 수행할 프로젝트를 만들어놓고, git pull한다면 변경이 있는 부분만 업데이트 될 것이라고 생각하였음.
그리고 pull의 결과로는

//2

왜일까? 혹시 수정전후가 다른가? 라는 생각에 App.js파일을 들어가서 확인해도 변경사항을 지적해주는 부분이 보이지 않았고
인터넷을 통해 해결 방법을 찾게 되었음.

git clean -d -f -f
아래의 링크 참조.
https://devonaws.com/git/git-pull-%EB%AA%85%EB%A0%B9-%EC%8B%9C%EC%97%90-untracked-working-tree-files-overwritten-%EB%82%98%EC%98%AC-%EB%95%8C/

이 명령어를 통해 문제를 해결하였고, 정상적으로 Github 원격 레포지토리에서 리액트 프로젝트를 가져올 수 있게 되었음.

그런데, git을 잘 사용하진 못하지만 불과 1달전에 Git에 대해서 공부해봐야겠다! 라는 생각을 가지고있었고, 공부했었는데, 
왜 이 에러가 발생하였고, 문제를 해결하게 해 준 저 명령어는 무엇인가? 라는 생각이 들었고 관련하여 무엇이 문제였고, 저 명령어는 무엇인지 찾아보게 되었음.

우선 git clean이라는 명령어는 추적되지않은(untracked/unstage)경우의 파일을 삭제시키는 명령어임.
//3
git에서는 폴더를 작업트리(Work Tree)라고 표현하며, 로컬 저장소(Local Repository)와 작업트리 사이에는 '인덱스(index)'라는 공간이 존재함
인덱스의 필요 이유는, 로컬 저장소에 commit시킬 대상들을 지정할 수 있도록 하기 위함임.
그래서 commit의 수행 전에 git add 명령어를 통해 인덱스에 추가시킬 파일 및 디렉토리를 지정하게 됨.
이때, 작업트리에서 인덱스로 파일을 등록하는것을 '인덱스에 등록' 혹은 '스테이징'이라고 표현하게 되는데...
이때에 인덱스에 등록된 파일을 추적중이라고도 함.
즉, 위에서 말한 git clean이 추적중이지 않은 파일에 대하여 삭제한다는 내용은 인덱스에 등록되지 않아 git을통해 관리하고 있지 않은 파일들에 대해서는
삭제하겠다. 라는 뜻이 됨.
아래의 링크 참조.( + 1달전에 해놧던 git정리내용..)
https://nesoy.github.io/articles/2018-10/Git-clean

그렇다면 내가 겪게되었던 오류는, 결국에는 내가 만든 파일이 깃에서 관리하는 대상이 아니였던 것으로 볼 수 있음.
그리고 git clean -d -f -f의 결과로 문제가 해결되고 git pull을 사용할 수 있게 되었던것은 사실은 
실제 내 작업트리에서 원래 가지고있던, 깃이 관리하지 않고 있던 파일들은 모두 지우고, 이후 로컬 저장소에서 pull을 수행한 것이 됨.

아.. 만약에 이를 잘못알고, 프로젝트의 초창기였기 때문이지, 한창 진행중일때에, 로컬에서 파일을 가져와 업데이트 해야겠다는 생각만 가지고
이런 오류로 인해 git clean -d -f -f를 수행했다면? 그래서 로컬 저장소의 내용은 추가되었지만 작업트리의 내용은 다 삭제되었다면?
심지어 관련해서 커밋해둔 내용도 없다면?(아니 커밋했다면 애초에 깃이 관리하는 파일이였겠지...)
꽤 끔찍한 일이 일어났을거라는 생각이 들게 되었다

git clean에 대해서 더 알아보고자, 저 명령어의 추가 옵션에 대해서 더 알아보고자 좀 더 찾아보았음.
우선 git clean은 기본적으로 해당 디렉토리에서 untracked한 파일에 대해서 삭제를 하는 명령어임.
-n 옵션과 함께 사용시에는 실제 파일을 제거하지는 않고, 어떤 파일을 제거할 것인지를 표시해 줌
-f 옵션은 현재 디렉토리에서 untracked한 파일의 실제 삭제를 지시함.
기본적으로 clean옵션은 파일에 대해서만 유효하지만, -d옵션을 통해 대상을 디렉토리에까지 확장이 가능함.
-x 의 경우에는 gitignore파일에 명시된, 무시하도록 만들어놓은 대상에 대하여서도 강제적인 clean을 하도록 함.

git clean -d -f -f의 경우에는, 디렉토리를 포함하여 실제 작업트리의 추적되지 않은 파일에 대한 삭제를 의미한다고 볼 수 있음.
아래의 링크 참조.
https://confluence.curvc.com/display/ASD/git+clean


